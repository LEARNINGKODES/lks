<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Juego HTML & CSS</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #0a1a0f;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    header {
      background: #111;
      width: 100%;
      padding: 12px;
      text-align: center;
      font-size: 1.4rem;
      font-weight: bold;
      color: #0f0;
    }

    #pantallaInicio {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    #pantallaInicio h1 { margin-bottom: 10px; }

    #pantallaJuego {
      display: none;
      width: 100%;
      max-width: 900px;
      padding: 16px;
    }

    .explicacion {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.2);
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 8px;
      font-size: 14px;
      color: #fff;
    }

    textarea {
      width: 100%;
      height: 120px;
      margin: 8px 0;
      border-radius: 6px;
      border: none;
      padding: 8px;
      font-family: monospace;
      resize: vertical;
    }

    #resultado {
      background: #fff;
      color: #000;
      padding: 10px;
      margin-top: 12px;
      min-height: 100px;
      border-radius: 6px;
    }

    #mensaje {
      font-weight: bold;
      margin: 10px 0;
    }
    .mensaje-correcto { color: #4caf50; }
    .mensaje-error { color: #f44336; }

    .controles {
      margin-top: 12px;
      display: flex;
      gap: 8px;
    }
    .controles button {
      padding: 8px 14px;
      border: none;
      border-radius: 6px;
      background: #0f0;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
    .controles button:hover { background: #6f6; }
  </style>
</head>
<body>
  <header>üêù Juego HTML & CSS</header>

  <!-- Pantalla de inicio -->
  <div id="pantallaInicio">
    <h1>Bienvenido</h1>
    <p>Aprende HTML y CSS paso a paso</p>
    <button onclick="iniciarJuego()">Comenzar</button>
  </div>

  <!-- Pantalla del juego -->
  <div id="pantallaJuego">
    <div class="explicacion">
      <p id="explicacion-texto"></p>
    </div>

    <label>Escribe tu HTML aqu√≠:</label>
    <textarea id="htmlInput" placeholder="<h1>Hola</h1>"></textarea>

    <div id="panelCSS" style="display:none;">
      <label>Escribe tu CSS aqu√≠:</label>
      <textarea id="cssInput" placeholder="h1 { color:red; }"></textarea>
    </div>

    <button onclick="verificarCodigo()">Verificar</button>
    <p id="mensaje"></p>

    <div id="resultado"></div>

    <div class="controles" id="controlesJuego" style="display:none;">
      <button onclick="nivelAnterior()">Anterior</button>
      <button onclick="siguienteNivel()" id="btnSiguiente" style="display:none;">Siguiente</button>
    </div>
  </div>

  <script>
    // Mensaje en pesta√±a
    document.addEventListener("visibilitychange", () => {
      document.title = document.hidden ? "Regresa :'(" : "Gracias por volver ^‚Å†_^";
    });

    let nivelActual = 0;

    // Definici√≥n de niveles (ejemplo b√°sico, agrega m√°s seg√∫n quieras)
    const niveles = [
  { tipo:'html',
    instruccion:"Nivel 1: Crea un t√≠tulo con <h1>",
    explicacion:"El encabezado principal se hace con <h1>. Ejemplo: <h1>Hola Mundo</h1>.",
    validar: (h) => /^<h1>[\s\S]*<\/h1>$/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 2: Escribe un p√°rrafo con <p>",
    explicacion:"El p√°rrafo se define con <p>. Ejemplo: <p>Este es un texto</p>.",
    validar: (h) => /^<p>[\s\S]*<\/p>$/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 3: Inserta un salto de l√≠nea <br>",
    explicacion:"El salto de l√≠nea se hace con <br>, no necesita etiqueta de cierre.",
    validar: (h) => /<br\s*\/?>/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 4: Texto en negrita con <b>",
    explicacion:"La etiqueta <b> sirve para poner en negrita. Ejemplo: <b>Texto</b>.",
    validar: (h) => /^<b>[\s\S]*<\/b>$/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 5: Texto en cursiva con <i>",
    explicacion:"La etiqueta <i> sirve para cursiva. Ejemplo: <i>Texto</i>.",
    validar: (h) => /^<i>[\s\S]*<\/i>$/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 6: Subt√≠tulo con <h2>",
    explicacion:"Es un subt√≠tulo debajo de <h1>. Ejemplo: <h2>Subt√≠tulo</h2>.",
    validar: (h) => /^<h2>[\s\S]*<\/h2>$/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 7: Encabezado m√°s peque√±o <h3>",
    explicacion:"Los encabezados se hacen con <h1> a <h6>. Ejemplo: <h3>T√≠tulo</h3>.",
    validar: (h) => /^<h3>[\s\S]*<\/h3>$/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 8: Lista ordenada <ol>",
    explicacion:"Crea una lista numerada. Ejemplo: <ol><li>Uno</li><li>Dos</li></ol>.",
    validar: (h) => /^<ol>[\s\S]*<\/ol>$/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 9: Lista desordenada <ul>",
    explicacion:"Crea una lista con vi√±etas. Ejemplo: <ul><li>A</li><li>B</li></ul>.",
    validar: (h) => /^<ul>[\s\S]*<\/ul>$/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 10: Imagen con <img>",
    explicacion:"La imagen se inserta con <img src='url' alt='texto'>.",
    validar: (h) => /<img[^>]+src=["'][^"']+["'][^>]*>/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 11: Enlace con <a>",
    explicacion:"Los enlaces se crean con <a href='url'>Texto</a>.",
    validar: (h) => /<a[^>]+href=["'][^"']+["'][^>]*>[\s\S]*<\/a>/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 12: L√≠nea horizontal <hr>",
    explicacion:"La etiqueta <hr> dibuja una l√≠nea divisoria.",
    validar: (h) => /<hr\s*\/?>/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 13: Crear un div contenedor <div>",
    explicacion:"El <div> agrupa elementos. Ejemplo: <div>Contenido</div>.",
    validar: (h) => /^<div>[\s\S]*<\/div>$/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 14: Agregar un atributo id",
    explicacion:"Ejemplo: <p id='intro'>Hola</p>. Usa id='...' dentro de la etiqueta.",
    validar: (h) => /<\w+\s+id=["'][^"']+["'][^>]*>[\s\S]*<\/\w+>/i.test(h.trim())
  },
  { tipo:'html',
    instruccion:"Nivel 15: Agregar una clase",
    explicacion:"Ejemplo: <p class='rojo'>Texto</p>. Usa class='...'.",
    validar: (h) => /<\w+\s+class=["'][^"']+["'][^>]*>[\s\S]*<\/\w+>/i.test(h.trim())
  },

  <!-- CSS Niveles siguen igual -->
  { tipo:'css',
    instruccion:"Nivel 16: Cuadrado negro 100x100",
    explicacion:"HTML: <div class='caja'></div> | CSS: .caja{width:100px;height:100px;background:black;}",
    htmlRequerido:{tag:'div', clase:'caja'},
    propsCSS:[/width\s*:\s*100px/i,/height\s*:\s*100px/i,/(background|background-color)\s*:\s*black/i]
  },
  { tipo:'css',
    instruccion:"Nivel 17: C√≠rculo azul",
    explicacion:"HTML: <div class='circulo'></div> | CSS: .circulo{width:100px;height:100px;background:blue;border-radius:50%;}",
    htmlRequerido:{tag:'div', clase:'circulo'},
    propsCSS:[/width\s*:\s*100px/i,/height\s*:\s*100px/i,/background\s*:\s*blue/i,/border-radius\s*:\s*50%/i]
  },
  { tipo:'css',
    instruccion:"Nivel 18: Rect√°ngulo rojo 200x100",
    explicacion:"HTML: <div class='rect'></div> | CSS: .rect{width:200px;height:100px;background:red;}",
    htmlRequerido:{tag:'div', clase:'rect'},
    propsCSS:[/width\s*:\s*200px/i,/height\s*:\s*100px/i,/background\s*:\s*red/i]
  },
  { tipo:'css',
    instruccion:"Nivel 19: Texto verde",
    explicacion:"HTML: <p class='verde'>Hola</p> | CSS: .verde{color:green;}",
    htmlRequerido:{tag:'p', clase:'verde'},
    propsCSS:[/color\s*:\s*green/i]
  },
  { tipo:'css',
    instruccion:"Nivel 20: Fondo amarillo",
    explicacion:"HTML: <div class='amarillo'>Texto</div> | CSS: .amarillo{background-color:yellow;}",
    htmlRequerido:{tag:'div', clase:'amarillo'},
    propsCSS:[/background(-color)?\s*:\s*yellow/i]
  },
  { tipo:'css',
    instruccion:"Nivel 21: Texto grande",
    explicacion:"HTML: <p class='grande'>Texto</p> | CSS: .grande{font-size:30px;}",
    htmlRequerido:{tag:'p', clase:'grande'},
    propsCSS:[/font-size\s*:\s*30px/i]
  },
  { tipo:'css',
    instruccion:"Nivel 22: Texto en cursiva",
    explicacion:"HTML: <p class='cursiva'>Texto</p> | CSS: .cursiva{font-style:italic;}",
    htmlRequerido:{tag:'p', clase:'cursiva'},
    propsCSS:[/font-style\s*:\s*italic/i]
  },
  { tipo:'css',
    instruccion:"Nivel 23: Texto en negrita",
    explicacion:"HTML: <p class='negrita'>Texto</p> | CSS: .negrita{font-weight:bold;}",
    htmlRequerido:{tag:'p', clase:'negrita'},
    propsCSS:[/font-weight\s*:\s*bold/i]
  },
  { tipo:'css',
    instruccion:"Nivel 24: Borde negro de 5px",
    explicacion:"HTML: <div class='marco'>Hola</div> | CSS: .marco{border:5px solid black;}",
    htmlRequerido:{tag:'div', clase:'marco'},
    propsCSS:[/border\s*:\s*5px\s+solid\s+black/i]
  },
  { tipo:'css',
    instruccion:"Nivel 25: M√°rgenes y relleno",
    explicacion:"HTML: <div class='espaciado'>Texto</div> | CSS: .espaciado{margin:20px;padding:10px;}",
    htmlRequerido:{tag:'div', clase:'espaciado'},
    propsCSS:[/margin\s*:\s*20px/i,/padding\s*:\s*10px/i]
  },
  { tipo:'css',
    instruccion:"Nivel 26: Centrar texto",
    explicacion:"HTML: <p class='centrado'>Hola</p> | CSS: .centrado{text-align:center;}",
    htmlRequerido:{tag:'p', clase:'centrado'},
    propsCSS:[/text-align\s*:\s*center/i]
  },
  { tipo:'css',
    instruccion:"Nivel 27: Texto subrayado",
    explicacion:"HTML: <p class='subrayado'>Hola</p> | CSS: .subrayado{text-decoration:underline;}",
    htmlRequerido:{tag:'p', clase:'subrayado'},
    propsCSS:[/text-decoration\s*:\s*underline/i]
  },
{ tipo:'css',
    instruccion:"Nivel 28: Fondo con imagen",
    explicacion:"HTML: <div class='fondo'></div> | CSS: .fondo{background-image:url('imagen.jpg');}",
    htmlRequerido:{tag:'div', clase:'fondo'},
    propsCSS:[/background-image\s*:\s*url\(['\"][^'\"]+['\"]\)/i]
  },
  { tipo:'css',
    instruccion:"Nivel 29: Ancho al 50%",
    explicacion:"HTML: <div class='mitad'></div> | CSS: .mitad{width:50%;}",
    htmlRequerido:{tag:'div', clase:'mitad'},
    propsCSS:[/width\s*:\s*50%/i]
  },
  { tipo:'css',
    instruccion:"Nivel 30: Texto centrado vertical y horizontalmente",
    explicacion:"HTML: <div class='centrar'>Hola</div> | CSS: .centrar{display:flex;align-items:center;justify-content:center;}",
    htmlRequerido:{tag:'div', clase:'centrar'},
    propsCSS:[/display\s*:\s*flex/i,/align-items\s*:\s*center/i,/justify-content\s*:\s*center/i]
  },
  { tipo:'css',
    instruccion:"Nivel 31: Fondo degradado",
    explicacion:"HTML: <div class='degradado'>Texto</div> | CSS: .degradado{background:linear-gradient(red, yellow);}",
    htmlRequerido:{tag:'div', clase:'degradado'},
    propsCSS:[/background\s*:\s*linear-gradient\([^)]*\)/i]
  },
  { tipo:'css',
    instruccion:"Nivel 32: Texto sombreado",
    explicacion:"HTML: <h2 class='sombra'>Hola</h2> | CSS: .sombra{text-shadow:2px 2px 5px black;}",
    htmlRequerido:{tag:'h2', clase:'sombra'},
    propsCSS:[/text-shadow\s*:\s*2px\s+2px\s+5px\s+black/i]
  },
  { tipo:'css',
    instruccion:"Nivel 33: Caja con sombra",
    explicacion:"HTML: <div class='cajaSombra'></div> | CSS: .cajaSombra{width:100px;height:100px;background:white;box-shadow:5px 5px 10px gray;}",
    htmlRequerido:{tag:'div', clase:'cajaSombra'},
    propsCSS:[/box-shadow\s*:\s*5px\s+5px\s+10px\s+gray/i]
  },
  { tipo:'css',
    instruccion:"Nivel 34: Bordes redondeados",
    explicacion:"HTML: <div class='redondo'></div> | CSS: .redondo{width:100px;height:100px;background:green;border-radius:20px;}",
    htmlRequerido:{tag:'div', clase:'redondo'},
    propsCSS:[/border-radius\s*:\s*20px/i]
  },
  { tipo:'css',
    instruccion:"Nivel 35: Animaci√≥n de color",
    explicacion:"HTML: <div class='animar'></div> | CSS: .animar{width:100px;height:100px;background:red;animation:colorear 2s infinite;} @keyframes colorear{0%{background:red;}100%{background:blue;}}",
    htmlRequerido:{tag:'div', clase:'animar'},
    propsCSS:[/animation\s*:\s*colorear\s*2s\s*infinite/i,/@keyframes\s*colorear/i]
  }
];

    function iniciarJuego() {
      document.getElementById("pantallaInicio").style.display = "none";
      document.getElementById("pantallaJuego").style.display = "block";
      cargarNivel();
    }

    function cargarNivel() {
      const nivel = niveles[nivelActual];
      document.getElementById("explicacion-texto").innerText = nivel.instruccion + "\n" + nivel.explicacion;

      document.getElementById("htmlInput").value = "";
      document.getElementById("cssInput").value = "";

      if (nivel.tipo === "css") {
        document.getElementById("panelCSS").style.display = "block";
      } else {
        document.getElementById("panelCSS").style.display = "none";
      }

      document.getElementById("btnSiguiente").style.display = "none";
      document.getElementById("controlesJuego").style.display = "block";
      document.getElementById("mensaje").textContent = "";
      actualizarVista();
    }

    function verificarCodigo() {
      const html = document.getElementById("htmlInput").value;
      const css = document.getElementById("cssInput").value;
      const nivel = niveles[nivelActual];
      let correcto = false;

      if (nivel.tipo === "html") {
        correcto = nivel.validar(html, css);
      } else {
        const tagRegex = new RegExp(`<${nivel.htmlRequerido.tag}\\s+class=["']${nivel.htmlRequerido.clase}["'].*>.*</${nivel.htmlRequerido.tag}>`, "i");
        correcto = tagRegex.test(html);
        if (correcto) {
          correcto = nivel.propsCSS.every(r => r.test(css));
        }
      }

      const mensaje = document.getElementById("mensaje");
      if (correcto) {
        mensaje.innerText = "‚úÖ ¬°Muy bien!";
        mensaje.className = "mensaje-correcto";
        document.getElementById("btnSiguiente").style.display = "inline-block";
      } else {
        mensaje.innerText = "‚ùå Intenta otra vez.";
        mensaje.className = "mensaje-error";
        document.getElementById("btnSiguiente").style.display = "none";
      }

      actualizarVista(html, css);
    }

    function actualizarVista(html="", css="") {
      const vista = document.getElementById("resultado");
      vista.innerHTML = html || "";
      if (css) {
        const style = document.createElement("style");
        style.innerText = css;
        vista.appendChild(style);
      }
    }

    function siguienteNivel() {
      if (nivelActual < niveles.length - 1) {
        nivelActual++;
        cargarNivel();
      } else {
        alert("üéâ ¬°Felicidades! Terminaste todos los niveles.");
      }
    }

    function nivelAnterior() {
      if (nivelActual > 0) {
        nivelActual--;
        cargarNivel();
      }
    }
  </script>
</body>
</html>